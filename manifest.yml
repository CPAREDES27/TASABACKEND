---
applications:
 
- name: flotabackend
  path: target/flotabackend-0.0.1-SNAPSHOT.war
  buildpacks:
    - sap_java_buildpack
  memory: 3000M
  timeout: 100
  disk-quota: 1G
  routes:
  - route: flotabackendqas.cfapps.us10.hana.ondemand.com
   
  env:
    USE_JCO: true
    # # Accept any OAuth client of any identity zone
    JAVA_OPTS: '-Djava.security.egd=file:///dev/./urandom -Xss349k -agentlib:jdwp=transport=dt_socket,address=8686,server=y,suspend=n'
    # Accept any OAuth client of any identity zone
    SAP_JWT_TRUST_ACL: '[{"clientid":"*","identityzone":"*"}]'
    xsuaa_connectivity_instance_name: "jco-xsuaa"

  services:
    - connectivity-service
    - destination-service
    - jco-xsuaa

  processes:
    - type: web
      command: start-web.sh
      disk_quota: 512M
      health-check-http-endpoint: /healthcheck
      health-check-type: http
      health-check-invocation-timeout: 80
      instances: 3
      memory: 3000M
      timeout: 10
    - type: worker
      command: start-worker.sh
      disk_quota: 1G
      health-check-type: process
      instances: 2
      memory: 3000M
      timeout: 15